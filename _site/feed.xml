<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title></title>
    <description>A technical blog by Madan Thangavelu</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Wed, 27 May 2020 08:07:56 -0700</pubDate>
    <lastBuildDate>Wed, 27 May 2020 08:07:56 -0700</lastBuildDate>
    <generator>Jekyll v3.8.5</generator>
    
      <item>
        <title>An opnionated REST URL design</title>
        <description>&lt;p&gt;Coming soon …&lt;/p&gt;

</description>
        <pubDate>Fri, 22 May 2020 00:00:00 -0700</pubDate>
        <link>http://localhost:4000/software/2020/05/22/opinionated-rest-url-design.html</link>
        <guid isPermaLink="true">http://localhost:4000/software/2020/05/22/opinionated-rest-url-design.html</guid>
        
        
        <category>Software</category>
        
      </item>
    
      <item>
        <title>REST API guidelines are outdated and insufficient - are you ready for it?</title>
        <description>&lt;p&gt;A year after your project execution you realize that the APIs are messy and inconsistent. Things looked good when you started the project, so where did you go wrong? Was it you or was it REST?&lt;/p&gt;

&lt;h2 id=&quot;why-did-we-invent-rest-apis&quot;&gt;Why did we invent REST APIs?&lt;/h2&gt;

&lt;p&gt;The internet was largely composed of static websites around 2000. Visiting a website like foobar.com/some/path would return HTML content back which the browsers knew how to render.&lt;/p&gt;

&lt;p&gt;You clicked and the server hurdled back another new page. This back and forth pingpong was largely how the World Wide Web was pieced together.&lt;/p&gt;

&lt;p&gt;These were indeed happy and simple times, however, not as exciting and chaotic as today - just 20 years later.&lt;/p&gt;

&lt;p&gt;Yahoo homepage in 2000 loaded minimal html with static content, but the 2020 website has &lt;em&gt;infinite scrolling, rotating news, covid updates, dynamically rotating advertisement and a dynamic trending news section and much more&lt;/em&gt;. We also went from large desktop computers to IoTs.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/posts/2020-05-20-REST-is-not-a-standard/yahoo-comparision.png&quot; alt=&quot;yahoo website in 2000&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;A number of things influenced the application layer development.&lt;/p&gt;

&lt;h5 id=&quot;medium-of-access&quot;&gt;Medium of access&lt;/h5&gt;

&lt;p&gt;Your million dollar weather app business in 2000 had a single web page to serve to your customers through their desktops.&lt;/p&gt;

&lt;p&gt;Contrast that to this day - a VC funded silicon valley company with a brilliant weather app. The first version works seamlessly on a native IOs app, native android App, native desktop application, native laptop application and on IoT device by your bedside that runs on an iPad like device and oh … finally all the different web browsers. Here is the kicker!&lt;/p&gt;

&lt;p&gt;All devices must be in sync with the cities I configured the weather. Who does’t love getting weather notifications across 5 devices a few seconds apart!&lt;/p&gt;

&lt;h5 id=&quot;not-a-one-person-job&quot;&gt;Not a one person job&lt;/h5&gt;

&lt;p&gt;The apps are so rich that sometimes, a single company might not be powering all the data that a customer sees.&lt;/p&gt;

&lt;p&gt;In the example of yahoo, the weather app is likely developed by another third party company that yahoo has no control over. This is also true of large companies with thousands of engineers too.&lt;/p&gt;

&lt;h5 id=&quot;languages-and-development-frameworks&quot;&gt;Languages and Development Frameworks&lt;/h5&gt;

&lt;p&gt;App development could happen in swift, objectiveC, Javascript, C#, Java.&lt;/p&gt;

&lt;p&gt;Server might be running in CGI scripts, PHP, JAVA, Ruby, Python, C#, Golang, Rust, Node.js and others.&lt;/p&gt;

&lt;p&gt;We have to make them all understand each other.&lt;/p&gt;

&lt;h2 id=&quot;the-internet-standards-pyramid&quot;&gt;The Internet standards pyramid&lt;/h2&gt;

&lt;p&gt;Interoperability - A cornerstone requirement for the web to function. In order for different devices, teams, languages to interact, they need to understand each other.&lt;/p&gt;

&lt;p&gt;Standards allows the interoperability of multiple devices developed by different teams to interact with multiple web services written in different languages. Some ideas become concrete enough to become a true standard, while others die trying.&lt;/p&gt;

&lt;p&gt;In late 1990s we saw browser wars where their capabilities allowed innovation but left us with a largely broken ecosystem - a feature would work in internet explorer but not on netscape. Each new rendering or scripting feature addition to netscape was a way for web developers to build richer experience for netscape customers. This ultimately resulted in a state where a website would either work on netscape or on internet explored.&lt;/p&gt;

&lt;p&gt;Standardization bodies like the IETF, W3C and the now ceased The Web Standards Project stepped in to establish standards that are the minimal set of capabilities that all browsers should adhere to by standardizing the specs for fundamental systems like HTML, HTTP and others.&lt;/p&gt;

&lt;p&gt;HTML or HTTP is one tiny piece of the puzzle. If you think about all the technologies that are needed for your cat video to show up, it is truly incredible. Along the layers of technology stack, there are numerous standardizations.&lt;/p&gt;

&lt;h5 id=&quot;application-layer-standardization&quot;&gt;Application layer standardization&lt;/h5&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/posts/2020-05-20-REST-is-not-a-standard/standards-pyramid.png&quot; alt=&quot;standards pyramid&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Enforcing standards are hard where there is room for a lot of creativity. The bottom most layers of the pyramid above provide relatively less creative space. 
Most engineers do not delve to that level during a normal day or product development.&lt;/p&gt;

&lt;p&gt;If you deviate from the spec/standard of DNS, there is change the internet is not going to work.&lt;/p&gt;

&lt;p&gt;However, the highest layers are areas of creative playground. It is really hard to set an exact spec/standard on a website layout. One may prescribe the accepted colors and tone of the copy. But the final outcome from two developers will be different.&lt;/p&gt;

&lt;p&gt;Same is true for REST APIs. Let us get into what REST is and how it has failed us but it survives us too.&lt;/p&gt;

&lt;h2 id=&quot;introduction-of-rest&quot;&gt;Introduction of REST&lt;/h2&gt;

&lt;p&gt;While APIs have existed even before the formalization of HTTP in 1997. XMLHttpRequest (XHR) in browsers in the mid 2000’s was a pivotal moment when APIs became mainstream. This allowed a browsers to speak multiple requests to the server and fetch the information they need without reloading the entire view. This essentially gave birth to the the now commonly known term web APIs.&lt;/p&gt;

&lt;p&gt;APIs became the contract between the backend and the frontend systems to “transfer state”.&lt;/p&gt;

&lt;p&gt;HTTP was already providing the core component of data transfer protocol between server and client. The primary anatomy of a HTTP had 3 components&lt;/p&gt;

&lt;p&gt;Representational State Transfer (REST) was an architectural proposal of how to use the 3 HTTP components (uri, header, body) to create some uniformity when building business applications that represent server state on the client.&lt;/p&gt;

&lt;p&gt;REST was introduced In 2000 by Roy fielding as part of a PHD thesis.&lt;/p&gt;

&lt;h5 id=&quot;theoretical-principles&quot;&gt;Theoretical Principles&lt;/h5&gt;

&lt;p&gt;REST was originally a guidance, the foundational pieces were concrete but the final implementation was open ended. Let us start with the principles of REST as originally proposed&lt;/p&gt;

&lt;table&gt;
    &lt;colgroup&gt;
        &lt;col width=&quot;30%&quot; /&gt;
        &lt;col width=&quot;70%&quot; /&gt; &lt;/colgroup&gt;
    &lt;thead&gt;
        &lt;tr class=&quot;header&quot;&gt;
            &lt;th&gt;Principle&lt;/th&gt;
            &lt;th&gt;Outcome&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
        &lt;tr&gt;
            &lt;td&gt;
                &lt;strong&gt;Client-Server&lt;/strong&gt;
            &lt;/td&gt;
            &lt;td&gt;
                 &lt;span class=&quot;success text-padding&quot;&gt;Success&lt;/span&gt;&lt;br /&gt;
                 &lt;em&gt;A separation of client vs server allowing us to swap either of them&lt;/em&gt; - We see android, IOS devices, IOTs, laptops and desktop driven by mostly similar APIs. However this comes out of the box from HTTP 1.1
            &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
                &lt;strong&gt;Layered system&lt;/strong&gt;
            &lt;/td&gt;
            &lt;td&gt;
                &lt;span class=&quot;success text-padding&quot;&gt;Success&lt;/span&gt;&lt;br /&gt;
                The client truly is un aware of the layers serving the data.
            &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
                &lt;strong&gt;Stateless&lt;/strong&gt;
            &lt;/td&gt;
            &lt;td&gt;
                &lt;span class=&quot;warning text-padding&quot;&gt;Partial Success&lt;/span&gt;&lt;br /&gt;
                &lt;em&gt;Each request from client to server must contain all of the information necessary to understand the request&lt;/em&gt; - The areas where it deviates are in cases where we keep server session data for security and authentication
            &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
                &lt;strong&gt;Cacheable&lt;/strong&gt;
            &lt;/td&gt;
            &lt;td&gt;
                &lt;span class=&quot;warning text-padding&quot;&gt;Partial Success&lt;/span&gt;&lt;br /&gt;
                &lt;em&gt;Each request from client to server must contain all of the information necessary to understand the request&lt;/em&gt; - The areas where it deviates are in cases where we keep server session data for security and authentication
            &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
                &lt;strong&gt;Uniform interface&lt;/strong&gt;
            &lt;/td&gt;
            &lt;td&gt;
                &lt;span class=&quot;danger text-padding&quot;&gt;Failure&lt;/span&gt;&lt;br /&gt;
                Not much value beyond HTTP 1.1 specs
            &lt;/td&gt;
        &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;shortcomings-of-rest-apis&quot;&gt;Shortcomings of REST APIs&lt;/h2&gt;

&lt;p&gt;The promise of each of these principles were only partially fulfilled. REST provides us parts and components and some suggestions, but nothing stops us from reinventing the wheel or REST is straight up not a good fit. If we drew up the needs of the business and what REST satisfies, it’s a small subset.&lt;/p&gt;

&lt;p&gt;REST did not aspire to be an all encompassing standards or guidance for building the business application. We have just embraced it blindly to be that.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/posts/2020-05-20-REST-is-not-a-standard/http-rest-business-overlap.png&quot; alt=&quot;rest api standards&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;h5 id=&quot;rest-in-practice-is-a-lie-mostly&quot;&gt;REST in practice is a lie (mostly)&lt;/h5&gt;

&lt;p&gt;Here are some scenarios which occurs 80% of the time when developing complex web applications. We will list down the choices. It clearly shows the gaps in REST.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Large get URL&lt;/strong&gt; - Sometimes a get URL has too many parameters. We see developers convert these semantically get calls into a POST request. We can see this done in elastic search queries.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;GET side effects&lt;/strong&gt; - In practical applications we see GET APIs emitting events (Kafka or any other system). If we were to calculate the airline price using events with GET, we are clearly changing the state of the system with each GET access.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Complex URL&lt;/strong&gt; - a GET request does not have the ability to send arrays, hash, or set via query URI. Different languages &amp;amp; frameworks interpret it differently. The REST principles of uniformity or client-server interoperability is broken in these cases.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Variations in resource access&lt;/strong&gt; - Complex business cases have many ways to access a resource. E.g., firstHotel, lastHotel, firstHotelVieableByCustomer, firstHotelForKayakIntegration, firstHotelForPricelineIntegration. While it is idealistic to want to put it into /hotel?[parameters]. I bet you to convince your engineer to do that. Testing, blast radius isolation, legacy code, or just completely different semantics might push us to have multiple URIs for the same resource.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Bidirectional data&lt;/strong&gt; - There are APIs where the server sends clients data via HTTP2 or SSE. Example, if a server wants to send price changes to the connected app. The request originates from the server by calling an API which sends the data via a persistent connection. There is no constructs for this in REST.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Caching&lt;/strong&gt; - For large APIs which return a huge amount of information, caching is likely needed at a more granular level than at the API. This is especially true in the case of bidirectional data. There is no REST guidance to rest upon.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Business Errors&lt;/strong&gt; - A user’s credit card payment API errors due to credit card failure, should the API return a 200 or 400 error? you might think 400 as the card is wrong. What if it was due to previous arrears and not due to any input in the current request, would it still be a 400 even through it was not a client error w.r.t this request?. As you can see, issues like this are very common in practical applications with no clear guidelines.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;HATEOAS&lt;/strong&gt; - The concept of recursive explication might work for some basic graph data models but it is not practical for a majority of business applications. it further creates chattiness between the server and the client. This is the worst for of N+1 query between a highly latency prone network layer.    Most practical applications stay away from this ‘REST’ feature.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;APIs per consumer&lt;/strong&gt; - As the number of devices and experiences increase, the flow between those devices start diverting. E.g., your experience of booking an airline from the app might be different from that on a desktop. As the experiences change, the APIs will need to be different. With this the reusability is out of the window and the need for multiple APIs looking similar happens.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Versioning&lt;/strong&gt; -  No one has come to terms with one approach that is easy and has meaning. Unlike server for software, versioning is not as easy in APIs as it spans multiple dimensions like schema, logic.&lt;/li&gt;
&lt;/ul&gt;

&lt;h5 id=&quot;guarantees-in-a-rest-api&quot;&gt;Guarantees in a REST API&lt;/h5&gt;

&lt;p&gt;When using REST, here are the lowest common denominator that you can safely assume. Anything beyond the following assumption could anytime turn out to be a lie.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;URL&lt;/strong&gt; - Do not assume the semantic meaning. Use it just to locate the handler function&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;GET&lt;/strong&gt; - All parameters are in the URL and headers&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;POST&lt;/strong&gt; - Parameters can be in URL, header and body&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Never assume 400, 500, or 200 as business semantics&lt;/strong&gt; - Always just assume they are system (client, server) issues. Introspect how business errors are surfaced in the specific implementation as it will be different between different projects.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;We have relied on REST for almost 20 years and it is time for a change. We have to consider the complexities we see in our business today and ideate a new standard from he ground up. This time, we should really put practice into theory instead of the other way around.&lt;/p&gt;
</description>
        <pubDate>Wed, 20 May 2020 00:00:00 -0700</pubDate>
        <link>http://localhost:4000/software/2020/05/20/REST-is-not-a-standard.html</link>
        <guid isPermaLink="true">http://localhost:4000/software/2020/05/20/REST-is-not-a-standard.html</guid>
        
        
        <category>Software</category>
        
      </item>
    
      <item>
        <title>Self-hosted password manager</title>
        <description>&lt;p&gt;The most reused password used in the world is 123456. There are only a few different options when it comes to choosing your password and remembering them. We will walk through a few options for creating and storing your password. Finally, I will introduce a web based password manager that I created over a weekend as a fun project. It can be self hosted for free while providing the best parts of all the available options to store and secure your passwords.&lt;/p&gt;

&lt;!--excerpt_separator--&gt;

&lt;h2 id=&quot;create-passwords-and-memorize&quot;&gt;Create passwords and memorize&lt;/h2&gt;

&lt;p&gt;Humans reuse the same password and sometimes relatively simple ones. Those who are sensitive about security innovate on their password patterns. If you have a good memory, this is an option, not the best though. Attackers can extract patterns if they have access to a few of your passwords.&lt;/p&gt;

&lt;h2 id=&quot;use-single-identity-providers&quot;&gt;Use single identity providers&lt;/h2&gt;

&lt;p&gt;Single identity provider systems like &lt;a href=&quot;http://openid.net/what-is-openid/&quot;&gt;openId&lt;/a&gt; should have been the norm as it provides a great way to keep your identity secure while getting access to large number of website. The adoption of this technology did not unfold the way it was envisioned. The failure can be attributed to two reasons. The need for a single company providing the identity, e.g., openId, facebookConnect. The other reason is that smaller websites would be least bothered to spend the effort to integrate with these systems which are fairly more involved that just storing salted encrypted passwords in the database.&lt;/p&gt;

&lt;h2 id=&quot;master-password-with-hosted-service&quot;&gt;Master password with hosted service&lt;/h2&gt;

&lt;p&gt;There are a number of companies that provide hosted and self-hosted options to secure all your passwords behind a master password. This is by far the most widely adopted option for the average security conscious person. Companies like lastpass, 1password provide this option. The only issue is that it provides the attacker a single large pot of gold. With chrome extensions provided by these companies, it could result in &lt;a href=&quot;https://blog.lastpass.com/2017/03/security-update-for-the-lastpass-extension.html/&quot;&gt;security vulnerabilities&lt;/a&gt;. It is well known that your data is as secure as your weakest link.&lt;/p&gt;

&lt;p&gt;Those who are uncomfortable with hosted solutions, can opt for self-hosted solutions. For individuals it can be expensive for no clear ROI.&lt;/p&gt;

&lt;p&gt;One of the free option to store your own password vault is using keepassX&lt;a href=&quot;http://www.keepassx.org/&quot;&gt;2&lt;/a&gt;. It is a great software that has good support across all platforms, both mobile and desktop. The main issue of this system is synchronization of passwords file. I have had situations where the file got corrupted while synchronizing it using dropbox.&lt;/p&gt;

&lt;h2 id=&quot;best-of-all-options&quot;&gt;Best of all options&lt;/h2&gt;

&lt;p&gt;None of the above options seem perfect. The ideal system should have the best features of all those systems. It should be free, should not be the single stop pot of gold for hackers and should not lock us into a single provider (like openID).&lt;/p&gt;

&lt;p&gt;This led me to create my own &lt;a href=&quot;https://github.com/HackingHabits/PersonalPasswordManager&quot;&gt;password manager&lt;/a&gt; that can be self hosted on any free providers like heroku or google app engine. This provides the necessary flexibility of having a web based service that is secure and free, that almost no one but you would know even exists.&lt;/p&gt;

&lt;p&gt;The implementation has a UI that encrypts the password using your master password and &lt;a href=&quot;https://bitwiseshiftleft.github.io/sjcl/&quot;&gt;Stanford Javascript Crypto Library&lt;/a&gt;. The backend is a python &lt;a href=&quot;http://flask.pocoo.org/&quot;&gt;Flask&lt;/a&gt; application that receives an already encrypted password via https and just stores it in the backend in a blob store. Here is the UI of the application.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/posts/2012-10-09-self-hosted-password-manager/password-manager.png&quot; alt=&quot;self hosted password manager&quot; width=&quot;336px&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I did not spend time optimizing the specific crypto technique as I was more focused on getting the application to work end to end over the weekend. I am sure there will be opportunities to improve on the specific crypto options.&lt;/p&gt;

&lt;p&gt;In order to lookup/store passwords:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;you must be logged in into your google account.&lt;/li&gt;
  &lt;li&gt;you must also know your mater password.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;I have been fairly happy with the functionality is has been providing me with the layers of security. You can optionally configure it such that you would not need your google account to be logged in.&lt;/p&gt;

&lt;h2 id=&quot;guide-to-have-one-of-your-own-hosted-password-manager&quot;&gt;Guide to have one of your own hosted password manager&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/HackingHabits/PersonalPasswordManager&quot;&gt;Github Source&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.slideshare.net/hackinghabits/personal-passwordmanager-installation-14646084&quot;&gt;Slideshare – Installation guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.slideshare.net/hackinghabits/password-manager-howtoguide&quot;&gt;Slideshare – How to guide&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

</description>
        <pubDate>Tue, 09 Oct 2012 00:00:00 -0700</pubDate>
        <link>http://localhost:4000/software/2012/10/09/self-hosted-password-manager.html</link>
        <guid isPermaLink="true">http://localhost:4000/software/2012/10/09/self-hosted-password-manager.html</guid>
        
        
        <category>Software</category>
        
      </item>
    
  </channel>
</rss>
